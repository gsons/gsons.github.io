{"version":3,"sources":["app.js","config.js","router.js","directive.js","ionicLazyLoad.js","ngStorage.js","service.js","home/home.js","list/list.js","person/person.js","star/star.js","view/view.js"],"names":["app","angular","module","config","$ionicConfigProvider","$sceDelegateProvider","scrolling","jsScrolling","$httpProvider","interceptors","push","factory","$rootScope","$q","$location","$timeout","$window","response","toState","path","headers","run","$ionicViewSwitcher","$state","$stateParams","$localStorage","$http","$goback","history","back","nextDirection","$refresh","location","reload","$on","event","to","toParams","from","fromParams","previousState","previousStateParams","fromState","ionic","Platform","setPlatform","constant","host","port","platform","$stateProvider","$urlRouterProvider","state","url","templateUrl","$tplVersion","abstract","views","tab-home","controller","cache","tab-list","tab-person","otherwise","directive","scope","ngsrc","ngopt","link","$scope","$dom","src","dom_image","element","offset","split","scale","width","screen","parseInt","height","image","Image","onload","$ionicGesture","$ionicBackdrop","restrict","replace","iAttrs","on","addClass","removeClass","$element","origEvent","$onScroll","$broadcast","$document","$ionicScrollDelegate","$compile","lazyScrollResize","imageLazyBackgroundImage","imageLazySrc","$attributes","loader","imageLazyDistanceFromBottomToLoad","imageLazyDistanceFromRightToLoad","imageLazyLoader","after","$watch","oldV","newV","remove","deregistration","isInView","loadImage","bind","e","resize","unbind","this","bgImg","style","backgroundImage","clientHeight","documentElement","clientWidth","imageRect","getBoundingClientRect","top","left","_storageFactory","storageType","_last$storage","_debounce","k","webStorage","console","warn","$storage","$default","items","isDefined","$reset","i","length","key","slice","fromJson","getItem","copy","setTimeout","equals","forEach","v","setItem","toJson","removeItem","addEventListener","newValue","$apply","$ionicLoading","show","_showBackdrop","_content","_icon","_class","showBackdrop","icon","mclass","content","template","animation","minWidth","showDelay","hide","$ionicPopup","_option","_callback","_callback_cancle","title","callback","callback_cancle","confirm","buttons","text","type","onTap","then","res","filter","_time","time","date","Date","nowtime","getTime","toDateString","formatDate","getMonth","getFullYear","fmt","obj","y","undefined","M","d","getDate","q","Math","floor","w","getDay","H","getHours","h","m","getMinutes","s","getSeconds","S","getMilliseconds","week","RegExp","val","j","len","substring","WAP_CONFIG","$log","_api","endpoint","post","data","deferred","defer","timeout","success","header","status","resolve","error","msg","code","reject","promise","get","$ionicListDelegate","$sessionStorage","Api","init","_order","_page","_limit","order","page","limit","has_more","videos","position","slideVideos","allVideo","searchKey","$getByHandle","scrollTop","concat","loadNextPage","view","video","go","save","vo","list","saveList","flag","vid","closeOptionButtons","log","scroll","pos","getScrollPosition","homePosition","categoryId","search","categories","focus","clearKey","getVideoByCHID","chid","searchVideo","_keyword","keyword","encodeURIComponent","$loading","delete","index","splice","$sce","video_src","trustAsResourceUrl","embedded_url"],"mappings":"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","file":"main.min.js","sourcesContent":["var app = angular.module('app', ['ionic', 'ngStorage','ionicLazyLoad']);\r\n\r\napp.config(function($ionicConfigProvider, $sceDelegateProvider) {\r\n    //$sceDelegateProvider.resourceUrlWhitelist([ 'self','*://www.youtube.com/**', '*://player.vimeo.com/video/**']);\r\n    $ionicConfigProvider.scrolling.jsScrolling(false);\r\n})\r\n\r\napp.config(function($httpProvider) {\r\n    $httpProvider.interceptors.push('AuthInterceptor');\r\n})\r\napp.factory('AuthInterceptor', function($rootScope, $q, $location, $timeout, $window) {\r\n    return {\r\n        response: function(response, toState) {\r\n            var path = $location.path();\r\n            var header = response.headers();\r\n            return response;\r\n        }\r\n    };\r\n})\r\napp.run(function($ionicViewSwitcher,$window, $rootScope, $state, $stateParams, $localStorage, $http, $q, $location) {\r\n    $rootScope.$state = $state;\r\n    $rootScope.$stateParams = $stateParams;\r\n    $rootScope.$goback = function() {\r\n        $window.history.back();\r\n        $ionicViewSwitcher.nextDirection(\"back\");\r\n    }\r\n    $rootScope.$refresh = function() {\r\n        $window.location.reload();\r\n    }\r\n    $rootScope.$on('$stateChangeSuccess', function(event, to, toParams, from, fromParams, toState) {\r\n        $rootScope.previousState = from;\r\n        $rootScope.previousStateParams = fromParams;\r\n    });\r\n\r\n    $rootScope.$on(\"$stateChangeStart\", function(event, toState, toParams, fromState, fromParams) {\r\n        ionic.Platform.setPlatform('ios');\r\n    })\r\n})","app.constant('WAP_CONFIG', {\r\n        host: 'https://api.avgle.com',\r\n        port: 443,\r\n        path: '/v1/',\r\n        platform: 'browser' // \r\n    })"," app.config(function($stateProvider, $urlRouterProvider) {\r\n\r\n     $stateProvider\r\n         .state('app', {\r\n             url: '/app',\r\n             templateUrl: 'tpl/app.html?v=' + $tplVersion,\r\n             abstract: true\r\n         })\r\n\r\n         .state('app.home', {\r\n             url: '/home',\r\n             views: {\r\n                 'tab-home': {\r\n                     templateUrl: 'tpl/home.html?v=' + $tplVersion,\r\n                     controller: 'homeCtrl',\r\n                     cache:true\r\n                 }\r\n             }\r\n         })\r\n\r\n         .state('app.list', {\r\n             url: '/list?key',\r\n             views: {\r\n                 'tab-list': {\r\n                     templateUrl: 'tpl/list.html?v=' + $tplVersion,\r\n                     controller: 'listCtrl',\r\n                     cache:true\r\n                 }\r\n             }\r\n         })\r\n         \r\n         .state('app.person', {\r\n             url: '/person',\r\n             views: {\r\n                 'tab-person': {\r\n                     templateUrl: 'tpl/person.html?v=' + $tplVersion,\r\n                     controller: 'personCtrl',\r\n                     cache:true\r\n                 }\r\n             }\r\n         })\r\n\r\n         .state('view', {\r\n             url: '/view',\r\n             templateUrl: 'tpl/view.html?v=' + $tplVersion,\r\n             controller: 'viewCtrl',\r\n             cache:true\r\n         })\r\n\r\n         .state('star', {\r\n             url: '/star',\r\n             templateUrl: 'tpl/star.html?v=' + $tplVersion,\r\n             controller: 'starCtrl',\r\n             cache:true\r\n         })\r\n\r\n\r\n\r\n     $urlRouterProvider.otherwise('/app/home');\r\n });","app.directive('ionImg', function() {\r\n    return {\r\n      scope: {\r\n        ngsrc: '@',\r\n        ngopt: '@',\r\n      },\r\n      link: function($scope, $dom) {\r\n        var src = $scope.ngsrc;\r\n        var ngopt = $scope.ngopt;\r\n        var dom_image = angular.element($dom)[0];\r\n        var img_src_default =\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAIAAAADwcZiAAAAW0lEQVRYCe3SMQ7AMAzDwLb//6k/UWTnyGQJPWqQgIPfmXmO33d8cQ22ups94YQ9gb7Js+SmhNnFSxP2LLkpYXbx0oQ9S25KmF28NGHPkpsSZhcvTdiz5KabhH9OFAMPqToRyQAAAABJRU5ErkJggg==\";\r\n        dom_image.src = img_src_default;\r\n        if (ngopt) {\r\n          var ngopt = ngopt.split(',');\r\n          var offset = ngopt[0];\r\n          var scale = ngopt[1];\r\n          dom_image.width = screen.width + parseInt(offset);\r\n          dom_image.height = dom_image.width * scale;\r\n        }\r\n        var image = new Image();\r\n        image.src = src;\r\n        image.onload = function() {\r\n          dom_image.src = src;\r\n        }\r\n      },\r\n    };\r\n  })\r\n\r\n/**\r\n*rjHoldActive指令\r\n*定义列表按下产生一种数据动态涟漪效果\r\n可以用在<ion-item>\r\n*/\r\napp.directive('rjHoldActive', ['$ionicGesture', '$timeout',function($ionicGesture, $timeout, $ionicBackdrop) {\r\n        return {\r\n            restrict: 'A',\r\n            replace: false,\r\n            link: function(scope, element, iAttrs, controller) {\r\n                $ionicGesture.on(\"hold\", function() {\r\n                    element.addClass('item-ripple');\r\n                    //300ms后恢复\r\n                    $timeout(function() {\r\n                        element.removeClass('item-ripple');\r\n                    }, 500);\r\n                }, element);\r\n\r\n                $ionicGesture.on(\"click\", function() {\r\n                    element.addClass('item-ripple');\r\n                    //300ms后恢复\r\n                    $timeout(function() {\r\n                        element.removeClass('item-ripple');\r\n                    }, 500);\r\n                }, element);\r\n\r\n\r\n            }\r\n        };\r\n}])\r\n\r\n\r\n","/**\r\n * Created by PAVEI on 30/09/2014.\r\n * Updated by Ross Martin on 12/05/2014\r\n * Updated by Davide Pastore on 04/14/2015\r\n * Updated by Michel Vidailhet on 05/12/2015\r\n * Updated by Rene Korss on 11/25/2015\r\n */\r\n\r\nangular.module('ionicLazyLoad', []);\r\n\r\nangular.module('ionicLazyLoad')\r\n\r\n.directive('lazyScroll', ['$rootScope',\r\n    function($rootScope) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function ($scope, $element) {\r\n                var origEvent = $scope.$onScroll;\r\n                $scope.$onScroll = function () {\r\n                    $rootScope.$broadcast('lazyScrollEvent');\r\n\r\n                    if(typeof origEvent === 'function'){\r\n                      origEvent();\r\n                    }\r\n                };\r\n            }\r\n        };\r\n}])\r\n\r\n.directive('imageLazySrc', ['$document', '$timeout', '$ionicScrollDelegate', '$compile',\r\n    function ($document, $timeout, $ionicScrollDelegate, $compile) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n                lazyScrollResize: \"@lazyScrollResize\",\r\n                imageLazyBackgroundImage: \"@imageLazyBackgroundImage\",\r\n                imageLazySrc: \"@\"\r\n            },\r\n            link: function ($scope, $element, $attributes) {\r\n                if (!$attributes.imageLazyDistanceFromBottomToLoad) {\r\n                    $attributes.imageLazyDistanceFromBottomToLoad = 0;\r\n                }\r\n                if (!$attributes.imageLazyDistanceFromRightToLoad) {\r\n                    $attributes.imageLazyDistanceFromRightToLoad = 0;\r\n                }\r\n\r\n                var loader;\r\n                if ($attributes.imageLazyLoader) {\r\n                    loader = $compile('<div class=\"image-loader-container\"><ion-spinner class=\"image-loader\" icon=\"' + $attributes.imageLazyLoader + '\"></ion-spinner></div>')($scope);\r\n                    $element.after(loader);\r\n                }\r\n\r\n                $scope.$watch('imageLazySrc', function (oldV, newV) {\r\n                    if(loader)\r\n                        loader.remove();\r\n                    if ($attributes.imageLazyLoader) {\r\n                        loader = $compile('<div class=\"image-loader-container\"><ion-spinner class=\"image-loader\" icon=\"' + $attributes.imageLazyLoader + '\"></ion-spinner></div>')($scope);\r\n                        $element.after(loader);\r\n                    }\r\n                    var deregistration = $scope.$on('lazyScrollEvent', function () {\r\n                        //    console.log('scroll');\r\n                            if (isInView()) {\r\n                                loadImage();\r\n                                deregistration();\r\n                            }\r\n                        }\r\n                    );\r\n                    $timeout(function () {\r\n                        if (isInView()) {\r\n                            loadImage();\r\n                            deregistration();\r\n                        }\r\n                    }, 500);\r\n                });\r\n                var deregistration = $scope.$on('lazyScrollEvent', function () {\r\n                       // console.log('scroll');\r\n                        if (isInView()) {\r\n                            loadImage();\r\n                            deregistration();\r\n                        }\r\n                    }\r\n                );\r\n\r\n                function loadImage() {\r\n                    //Bind \"load\" event\r\n                    $element.bind(\"load\", function (e) {\r\n                        if ($attributes.imageLazyLoader) {\r\n                            loader.remove();\r\n                        }\r\n                        if ($scope.lazyScrollResize == \"true\") {\r\n                            //Call the resize to recalculate the size of the screen\r\n                            $ionicScrollDelegate.resize();\r\n                        }\r\n                        $element.unbind(\"load\");\r\n                    });\r\n                    $element.bind(\"error\", function (e) {\r\n                        this.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAIAAAADwcZiAAAAW0lEQVRYCe3SMQ7AMAzDwLb//6k/UWTnyGQJPWqQgIPfmXmO33d8cQ22ups94YQ9gb7Js+SmhNnFSxP2LLkpYXbx0oQ9S25KmF28NGHPkpsSZhcvTdiz5KabhH9OFAMPqToRyQAAAABJRU5ErkJggg=='\r\n                    });\r\n\r\n                    if ($scope.imageLazyBackgroundImage == \"true\") {\r\n                        var bgImg = new Image();\r\n                        bgImg.onload = function () {\r\n                            if ($attributes.imageLazyLoader) {\r\n                                loader.remove();\r\n                            }\r\n                            $element[0].style.backgroundImage = 'url(' + $attributes.imageLazySrc + ')'; // set style attribute on element (it will load image)\r\n                            if ($scope.lazyScrollResize == \"true\") {\r\n                                //Call the resize to recalculate the size of the screen\r\n                                $ionicScrollDelegate.resize();\r\n                            }\r\n                        };\r\n                        bgImg.src = $attributes.imageLazySrc;\r\n                    } else {\r\n                        $element[0].src = $attributes.imageLazySrc; // set src attribute on element (it will load image)\r\n                    }\r\n                }\r\n\r\n                function isInView() {\r\n                    var clientHeight = $document[0].documentElement.clientHeight;\r\n                    var clientWidth = $document[0].documentElement.clientWidth;\r\n                    var imageRect = $element[0].getBoundingClientRect();\r\n                    return (imageRect.top >= 0 && imageRect.top <= clientHeight + parseInt($attributes.imageLazyDistanceFromBottomToLoad))\r\n                        && (imageRect.left >= 0 && imageRect.left <= clientWidth + parseInt($attributes.imageLazyDistanceFromRightToLoad));\r\n                }\r\n\r\n                // bind listener\r\n                // listenerRemover = scrollAndResizeListener.bindListener(isInView);\r\n\r\n                // unbind event listeners if element was destroyed\r\n                // it happens when you change view, etc\r\n                $element.on('$destroy', function () {\r\n                    deregistration();\r\n                });\r\n\r\n                // explicitly call scroll listener (because, some images are in viewport already and we haven't scrolled yet)\r\n                $timeout(function () {\r\n                    if (isInView()) {\r\n                        loadImage();\r\n                        deregistration();\r\n                    }\r\n                }, 500);\r\n            }\r\n        };\r\n    }]);\r\n","'use strict';\r\n\r\n(function() {\r\n\r\n    /**\r\n     * @ngdoc overview\r\n     * @name ngStorage\r\n     */\r\n\r\n    angular.module('ngStorage', []).\r\n\r\n    /**\r\n     * @ngdoc object\r\n     * @name ngStorage.$localStorage\r\n     * @requires $rootScope\r\n     * @requires $window\r\n     */\r\n\r\n    factory('$localStorage', _storageFactory('localStorage')).\r\n\r\n    /**\r\n     * @ngdoc object\r\n     * @name ngStorage.$sessionStorage\r\n     * @requires $rootScope\r\n     * @requires $window\r\n     */\r\n\r\n    factory('$sessionStorage', _storageFactory('sessionStorage'));\r\n\r\n    function _storageFactory(storageType) {\r\n        return [\r\n            '$rootScope',\r\n            '$window',\r\n\r\n            function(\r\n                $rootScope,\r\n                $window\r\n            ){\r\n                // #9: Assign a placeholder object if Web Storage is unavailable to prevent breaking the entire AngularJS app\r\n                var webStorage = $window[storageType] || (console.warn('This browser does not support Web Storage!'), {}),\r\n                    $storage = {\r\n                        $default: function(items) {\r\n                            for (var k in items) {\r\n                                angular.isDefined($storage[k]) || ($storage[k] = items[k]);\r\n                            }\r\n\r\n                            return $storage;\r\n                        },\r\n                        $reset: function(items) {\r\n                            for (var k in $storage) {\r\n                                '$' === k[0] || delete $storage[k];\r\n                            }\r\n\r\n                            return $storage.$default(items);\r\n                        }\r\n                    },\r\n                    _last$storage,\r\n                    _debounce;\r\n\r\n                for (var i = 0, k; i < webStorage.length; i++) {\r\n                    // #8, #10: `webStorage.key(i)` may be an empty string (or throw an exception in IE9 if `webStorage` is empty)\r\n                    (k = webStorage.key(i)) && 'ngStorage-' === k.slice(0, 10) && ($storage[k.slice(10)] = angular.fromJson(webStorage.getItem(k)));\r\n                }\r\n\r\n                _last$storage = angular.copy($storage);\r\n\r\n                $rootScope.$watch(function() {\r\n                    _debounce || (_debounce = setTimeout(function() {\r\n                        _debounce = null;\r\n\r\n                        if (!angular.equals($storage, _last$storage)) {\r\n                            angular.forEach($storage, function(v, k) {\r\n                                angular.isDefined(v) && '$' !== k[0] && webStorage.setItem('ngStorage-' + k, angular.toJson(v));\r\n\r\n                                delete _last$storage[k];\r\n                            });\r\n\r\n                            for (var k in _last$storage) {\r\n                                webStorage.removeItem('ngStorage-' + k);\r\n                            }\r\n\r\n                            _last$storage = angular.copy($storage);\r\n                        }\r\n                    }, 100));\r\n                });\r\n\r\n                // #6: Use `$window.addEventListener` instead of `angular.element` to avoid the jQuery-specific `event.originalEvent`\r\n                'localStorage' === storageType && $window.addEventListener && $window.addEventListener('storage', function(event) {\r\n                    if ('ngStorage-' === event.key.slice(0, 10)) {\r\n                        event.newValue ? $storage[event.key.slice(10)] = angular.fromJson(event.newValue) : delete $storage[event.key.slice(10)];\r\n\r\n                        _last$storage = angular.copy($storage);\r\n\r\n                        $rootScope.$apply();\r\n                    }\r\n                });\r\n\r\n                return $storage;\r\n            }\r\n        ];\r\n    }\r\n\r\n})();\r\n","     app.factory('$loading', function($ionicLoading) {\r\n         return {\r\n             show: function(_showBackdrop, _content, _icon, _class) {\r\n                 var showBackdrop = _showBackdrop || false;\r\n                 var icon = _icon || 'ios';\r\n                 var mclass = _class || '';\r\n                 var content = _content || \"\";\r\n                 var style = showBackdrop ? \"<style>.loading-container .loading{background-color: rgba(0, 0, 0,0.6);}</style>\" :\r\n                     \"<style>.loading-container .loading{background-color: rgba(0, 0, 0,0.2);}</style>\";\r\n                 $ionicLoading.show({\r\n                     template: style + '<ion-spinner icon=\"' + icon + '\" class=\"' + mclass + '\"></ion-spinner><div>' + content + '</div>',\r\n                     content: 'Loading',\r\n                     animation: '',\r\n                     showBackdrop: showBackdrop,\r\n                     minWidth: 500,\r\n                     showDelay: 0\r\n                 });\r\n             },\r\n             hide: function() {\r\n                 $ionicLoading.hide();\r\n             }\r\n         }\r\n     });\r\n     app.factory(\"$confirm\", function($ionicPopup) {\r\n         return {\r\n             show: function(_option, _callback, _callback_cancle) {\r\n                 var title = _option.title || '提示';\r\n                 var content = _option.content || '';\r\n                 var callback = _callback || function() {};\r\n                 var callback_cancle = _callback_cancle || function() {};\r\n                 var popup = $ionicPopup.confirm({\r\n                     template: content,\r\n                     title: title,\r\n                     buttons: [{\r\n                         text: '确定',\r\n                         type: 'button-positive',\r\n                         onTap: function(e) {\r\n                             return 1;\r\n                         }\r\n                     }, {\r\n                         text: '取消',\r\n                         type: 'button-assertive',\r\n                     }]\r\n                 });\r\n                 popup.then(function(res) {\r\n                     if (res) {\r\n                         callback();\r\n                     } else {\r\n                         callback_cancle();\r\n                     }\r\n                 })\r\n             },\r\n         }\r\n     });\r\n     app.filter('Datetranslater', function() {\r\n\r\n         return function(_time) {\r\n             var time = _time;\r\n             var date = new Date(time);\r\n             var nowtime = new Date().getTime();\r\n             //当天\r\n             if (date.toDateString() === new Date().toDateString()) {\r\n                 return formatDate(date, 'HH:mm');\r\n             }\r\n             //六天以内\r\n             else if (nowtime - time < 6 * 24 * 60 * 60 * 1000) {\r\n                 return formatDate(date, 'w HH:mm');\r\n             }\r\n             //本月\r\n             else if (date.getMonth() == new Date().getMonth() && date.getFullYear() == new Date().getFullYear()) {\r\n                 return formatDate(date, 'MM-dd HH:mm');\r\n             } else if (date.getFullYear() == new Date().getFullYear()) {\r\n                 return formatDate(date, 'yyyy-MM-dd HH:mm');\r\n             } else {\r\n                 return formatDate(date, 'yyyy-MM-dd HH:mm');\r\n             }\r\n\r\n         }\r\n\r\n         function formatDate(date, fmt) {\r\n             date = date == undefined ? new Date() : date;\r\n             date = typeof date == 'number' ? new Date(date) : date;\r\n             fmt = fmt || 'yyyy-MM-dd HH:mm:ss';\r\n             var obj = {\r\n                 'y': date.getFullYear(), // 年份，注意必须用getFullYear\r\n                 'M': date.getMonth() + 1, // 月份，注意是从0-11\r\n                 'd': date.getDate(), // 日期\r\n                 'q': Math.floor((date.getMonth() + 3) / 3), // 季度\r\n                 'w': date.getDay(), // 星期，注意是0-6\r\n                 'H': date.getHours(), // 24小时制\r\n                 'h': date.getHours() % 12 == 0 ? 12 : date.getHours() % 12, // 12小时制\r\n                 'm': date.getMinutes(), // 分钟\r\n                 's': date.getSeconds(), // 秒\r\n                 'S': date.getMilliseconds() // 毫秒\r\n             };\r\n             var week = ['日', '一', '二', '三', '四', '五', '六'];\r\n             for (var i in obj) {\r\n                 fmt = fmt.replace(new RegExp(i + '+', 'g'), function(m) {\r\n                     var val = obj[i] + '';\r\n                     if (i == 'w') return (m.length > 2 ? '星期' : '周') + week[val];\r\n                     for (var j = 0, len = val.length; j < m.length - len; j++) val = '0' + val;\r\n                     return m.length == 1 ? val : val.substring(val.length - m.length);\r\n                 });\r\n             }\r\n             return fmt;\r\n         }\r\n\r\n\r\n     });\r\n     app.factory('Api', [\"$http\", \"WAP_CONFIG\", \"$q\", \"$log\",\"$ionicLoading\",\"$timeout\",function($http, WAP_CONFIG, $q, $log,$ionicLoading,$timeout) {  \r\n        var _api = WAP_CONFIG;  \r\n        var endpoint = _api.host + ':' + _api.port+_api.path;  \r\n  \r\n        // public api  \r\n        return {  \r\n            //发送服务器的域名+端口， \r\n            endpoint: endpoint,  \r\n  \r\n            //post请求，第一个参数是URL，第二个参数是向服务器发送的参数（JSON对象），  \r\n            post: function(url, data) {  \r\n                url = endpoint + url;  \r\n                var _timeout=5000;\r\n                var deferred = $q.defer();  \r\n                var tempPromise;  \r\n                //显示加载进度  \r\n                $ionicLoading.show({  \r\n                    template: '加载中...'  \r\n                });  \r\n                //判断用户是否传递了参数，如果有参数需要传递参数  \r\n                if(data != null && data != undefined && data != \"\"){  \r\n                    tempPromise = $http.post(url,data,{timeout:_timeout});  \r\n                }else{  \r\n                    tempPromise = $http.post(url,{timeout:_timeout});  \r\n                }  \r\n                tempPromise.success(function(data,header,config,status) {  \r\n                    deferred.resolve(data);  \r\n                    $ionicLoading.hide();  \r\n                }).error(function(msg, code) {  \r\n                    deferred.reject(msg);  \r\n                    $log.error(msg, code);  \r\n                    $ionicLoading.hide(); \r\n                    $ionicLoading.show({  \r\n                    template: '出错了...'  \r\n                    });\r\n                    $timeout(function(){$ionicLoading.hide()},1000);  \r\n                });  \r\n                return deferred.promise;  \r\n            },  \r\n  \r\n            //get请求，第一个参数是URL，第二个参数是向服务器发送的参数（JSON对象），  \r\n            get: function(url, data) {  \r\n                url = endpoint + url;  \r\n                var deferred = $q.defer();  \r\n                var tempPromise;  \r\n                var _timeout=5000;\r\n                //显示加载进度  \r\n                $ionicLoading.show({  \r\n                    template: '加载中...'  \r\n                });  \r\n                //判断用户是否传递了参数，如果有参数需要传递参数  \r\n                if(data != null && data != undefined && data != \"\"){  \r\n                    tempPromise = $http.get(url,data,{timeout:_timeout});  \r\n                }else{  \r\n                    tempPromise = $http.get(url,{timeout:_timeout});  \r\n                }  \r\n                tempPromise.success(function(data,header,config,status) {  \r\n                    deferred.resolve(data);  \r\n                    $ionicLoading.hide();  \r\n                }).error(function(msg, code) {  \r\n                    deferred.reject(msg);  \r\n                    $ionicLoading.hide();  \r\n                    $log.error(msg, code);  \r\n                    $ionicLoading.show({  \r\n                    template: '<i class=\"icon ion-android-warning assertive\"></i> 出错了'  \r\n                    });\r\n                    $timeout(function(){$ionicLoading.hide()},1000);  \r\n                });  \r\n                return deferred.promise;  \r\n            }  \r\n        };  \r\n  \r\n    }]) ","app.controller('homeCtrl', function($ionicListDelegate ,$state,$ionicViewSwitcher,$localStorage, $sessionStorage, $scope, $stateParams, Api, $ionicScrollDelegate, $rootScope, $location) {\r\n        function init() {\r\n            $scope.page = 0;\r\n            $scope.has_more = true;\r\n            $scope.videos = [];\r\n            $scope.position='';\r\n            initSlideVideos();\r\n        }\r\n\r\n        function initSlideVideos(_order, _page, _limit) {\r\n            var order = _order || 'mr';\r\n            var page = _page || 1;\r\n            var limit = _limit || 5;\r\n            Api.get('videos/' + page + '?o=' + order + '&limit=' + limit).then(function(data) {\r\n                if (data.success) {\r\n                    $scope.slideVideos = data.response.videos;\r\n                }\r\n            });\r\n        }\r\n        $scope.allVideo = function(_order, _page, _limit) {\r\n            var order = _order || 'mv';\r\n            var page = _page || 1;\r\n            if (page == 1) {\r\n                $scope.searchKey = '';\r\n                $scope.page = 1;\r\n                $scope.videos = [];\r\n                $ionicScrollDelegate.$getByHandle('listScroll').scrollTop(true);\r\n            }\r\n            var limit = _limit || 10;\r\n            Api.get('videos/' + page + '?o=' + order + '&limit=' + limit).then(function(data) {\r\n                if (data.success) {\r\n                    $scope.has_more = data.response.has_more;\r\n                    $scope.videos = $scope.videos.concat(data.response.videos);\r\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                }\r\n            });\r\n        }\r\n\r\n        $scope.loadNextPage = function() {\r\n            $scope.page++;\r\n            $scope.allVideo('mv', $scope.page);\r\n        }\r\n        $scope.view = function(video) {\r\n            $localStorage.video = video;\r\n            // $ionicViewSwitcher.nextDirection(\"back\");\r\n              $state.go(\"view\");\r\n            $ionicViewSwitcher.nextDirection(\"forward\");   \r\n        }\r\n\r\n          $scope.save=function(vo){\r\n            var list=$localStorage.saveList||[];\r\n            var flag=false;\r\n            for(var i in list){\r\n                if(list[i].vid==vo.vid){\r\n                    flag=true;break;\r\n                }\r\n            }\r\n            if(!flag) list.push(vo);\r\n            $localStorage.saveList=list;\r\n            $ionicListDelegate.closeOptionButtons();\r\n        }\r\n\r\n        $scope.$on('$ionicView.loaded', function() {\r\n            console.log(\"home\",\"$ionicView.loaded\")\r\n            init();\r\n        });\r\n\r\n        $scope.scroll=function(){\r\n             var content=$ionicScrollDelegate.$getByHandle('listScroll');\r\n             var pos=content.getScrollPosition();\r\n             $rootScope.homePosition=pos;\r\n        }\r\n    })\r\n\r\n"," app.controller('listCtrl',function($ionicListDelegate,$state,$ionicViewSwitcher,$timeout,$localStorage,$sessionStorage,$scope, $stateParams, Api, $ionicScrollDelegate, $rootScope, $location) {\r\n       \r\n        function init() {\r\n            $scope.categoryId=\"1\";\r\n            $scope.searchKey=$location.search().key||'';\r\n            $scope.page = 0;\r\n            $scope.videos = [];\r\n            $scope.has_more = true;\r\n            initCategories();\r\n        }\r\n\r\n        function initCategories() {\r\n            Api.get('categories').then(function(data) {\r\n                if (data.success) {\r\n                    $scope.categories = data.response.categories;\r\n                    $scope.categoryId=\"1\";\r\n                }\r\n            });\r\n        }\r\n        \r\n\r\n        $scope.focus=function(){\r\n            $timeout(function(){ $ionicScrollDelegate.$getByHandle('contentScroll').resize();},500)\r\n        }\r\n        $scope.clearKey=function(){\r\n            \r\n            $scope.getVideoByCHID($scope.categoryId);\r\n        }\r\n        $scope.getVideoByCHID = function(chid, _page, _limit) {\r\n            $scope.categoryId=chid;\r\n            $scope.has_more=true;\r\n            var page = _page || 1;\r\n            if (page == 1) {\r\n                $scope.searchKey = '';\r\n                $scope.page = 1;\r\n                $scope.videos = [];\r\n               \r\n                \r\n            }\r\n            var limit = _limit || 10;\r\n            Api.get('videos/' + page + '?c=' + chid + '&limit=' + limit).then(function(data) {\r\n                if (data.success) {\r\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                    $scope.has_more = data.response.has_more;\r\n                    $scope.videos = $scope.videos.concat(data.response.videos);\r\n                   \r\n                    \r\n                }\r\n            });\r\n        }\r\n\r\n        $scope.searchVideo = function(_keyword, _page, _limit) {\r\n            var page = _page || 1;\r\n            if (page == 1) {\r\n                $scope.page = 1;\r\n                $scope.videos = [];\r\n            }\r\n            var keyword = _keyword || '';\r\n            var limit = _limit || 15;\r\n            var path=($location.search().key==$scope.searchKey)?'jav':'search';\r\n            Api.get(path+'/' + encodeURIComponent(keyword) + '/' + page + '?limit=' + limit).then(function(data) {\r\n                if (data.success) {\r\n                    $scope.has_more = data.response.has_more;\r\n                    $scope.videos = $scope.videos.concat(data.response.videos);\r\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\r\n                   \r\n                    \r\n                }\r\n            });\r\n        }\r\n\r\n        $scope.loadNextPage = function() {\r\n            $scope.page++;\r\n            if ($scope.searchKey) {\r\n                $scope.searchVideo($scope.searchKey, $scope.page);\r\n            } else {\r\n                $scope.getVideoByCHID($scope.categoryId, $scope.page);\r\n            }\r\n        }\r\n        $scope.view = function(video) {\r\n            $localStorage.video = video;\r\n             // $ionicViewSwitcher.nextDirection(\"back\");\r\n             $state.go(\"view\");\r\n            $ionicViewSwitcher.nextDirection(\"forward\");\r\n           \r\n        }\r\n\r\n        $scope.save=function(vo){\r\n            var list=$localStorage.saveList||[];\r\n            var flag=false;\r\n            for(var i in list){\r\n                if(list[i].vid==vo.vid){\r\n                    flag=true;break;\r\n                }\r\n            }\r\n            if(!flag) list.push(vo);\r\n            $localStorage.saveList=list;\r\n            $ionicListDelegate.closeOptionButtons();\r\n        }\r\n          $scope.$on('$ionicView.loaded', function() {\r\n            console.log(\"list\",\"$ionicView.loaded\")\r\n            init();\r\n        });\r\n    })\r\n","app.controller(\"personCtrl\",function($scope,$localStorage){\r\n    $scope.$on('$ionicView.loaded', function() {\r\n            console.log(\"person\",\"$ionicView.loaded\")\r\n            // init();\r\n        });\r\n});","app.controller(\"starCtrl\", function($ionicViewSwitcher,$state,$ionicListDelegate,$rootScope,$location,$ionicScrollDelegate,$loading, $scope, $http,$sessionStorage,$localStorage) {\n    function init() {\n    \t$scope.videos=$localStorage.saveList;\n    }\n    $scope.$on('$ionicView.enter', function(e) {\n            init();\n            console.log(\"star\",\"$ionicView.enter\");\n      });\n    $scope.delete=function(index){\n    \t$scope.videos.splice(index,1);\n    \t$localStorage.saveList=$scope.videos;\n        $ionicListDelegate.closeOptionButtons();\n    }\n    $scope.view = function(video) {\n            $localStorage.video = video;\n             // $ionicViewSwitcher.nextDirection(\"back\");\n             $state.go(\"view\");\n            $ionicViewSwitcher.nextDirection(\"forward\");\n           \n        }\n});","app.controller('viewCtrl', function($state,$localStorage,$sessionStorage,$scope, $stateParams, Api, $ionicScrollDelegate, $rootScope, $location, $sce) {\n        $scope.$on('$ionicView.enter', function(e) {\n            init();\n            console.log(\"view\",\"$ionicView.enter\");\n        });\n\n         $scope.$on('$ionicView.beforeLeave', function(e) {\n            $scope.video_src=undefined;\n            console.log(\"view\",\"$ionicView.beforeLeave\");\n        });\n\n\n        function init() {\n            $scope.page = 0;\n            $scope.has_more = true;\n            $scope.videos = [];\n            $scope.video=$localStorage.video;\n            $scope.allVideo($scope.page);\n            $scope.video_src = $sce.trustAsResourceUrl($scope.video.embedded_url);\n        }\n        $scope.allVideo = function(_order, _page, _limit) {\n            var order = _order || 'mv';\n            var page = _page || 1;\n            if (page == 1) {\n                $scope.searchKey = '';\n                $scope.page = 1;\n                $scope.videos = [];\n                $ionicScrollDelegate.$getByHandle('listScroll').scrollTop(true);\n            }\n            var limit = _limit || 15;\n            Api.get('videos/' + page + '?o=' + order + '&limit=' + limit).then(function(data) {\n                if (data.success) {\n                    $scope.has_more = data.response.has_more;\n                    $scope.videos = $scope.videos.concat(data.response.videos);\n                     $scope.$broadcast('scroll.infiniteScrollComplete');\n                }\n            });\n        }\n\n        $scope.loadNextPage = function() {\n            $scope.page++;\n            $scope.allVideo('', $scope.page);\n        }\n\n         $scope.save=function(vo){\n            var list=$localStorage.saveList||[];\n            var flag=false;\n            for(var i in list){\n                if(list[i].vid==vo.vid){\n                    flag=true;break;\n                }\n            }\n            if(!flag) list.push(vo);\n            $localStorage.saveList=list;\n            $ionicListDelegate.closeOptionButtons();\n        }\n        \n        $scope.view = function(video) {\n            $localStorage.video = video;\n            $state.go(\"view\",{},{reload:true})\n        }\n    })"]}