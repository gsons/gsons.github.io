<extend name="Tpl:Basic" />
<block name="body">
    <div class="box box-success">
        <div class="box-body">
            <div class="container-fluid">
                <div class="row">
                    <volist name="list" id="vo" key="i">
                        <div class="box" style="cursor:pointer;width:200px;float:left;margin-right:10px;" ondblclick="ChooseVoice(this)" data-id="{$vo.id}" data-src="{$vo.src}" data-title="{$vo.title}">
                            <div class="box-body">
                                <div id="jquery_jplayer_{$i}" class="jp-jplayer"></div>
                                <div id="jp_container_{$i}" class="jp-audio-stream" role="application" aria-label="media player">
                                    <div class="jp-type-single">
                                        <div class="jp-gui jp-interface">
                                            <div class="jp-controls">
                                                <button class="jp-play" role="button" tabindex="0">play</button>
                                            </div>
                                            <div class="jp-volume-controls">
                                                <button class="jp-mute" role="button" tabindex="0">mute</button>
                                                <button class="jp-volume-max" role="button" tabindex="0">max volume</button>
                                                <div class="jp-volume-bar">
                                                    <div class="jp-volume-bar-value"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="jp-details">
                                            <div class="jp-title" aria-label="title">&nbsp;</div>
                                        </div>
                                        <div class="jp-no-solution">
                                            <span>Update Required</span>
                                            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </volist>
                  </div>
            </div>
        </div>
        <div class="box-footer">
            {$page}
        </div>
    </div>
</block>
<block name="script">
    <!--layer-->
    <link rel="stylesheet" href="__PLUS__/layer/skin/layer.css"/>
    <script src="__PLUS__/layer/layer.js"></script>
    <script>
        function ChooseVoice(obj){
            var id = $(obj).attr('data-id')
            var title = $(obj).attr('data-title')
            var src = $(obj).attr('data-src')
            var box = '<div class="box" style="max-width:400px;"> <div class="box-header with-border"><h3 class="box-title">'+title+'</h3> <div class="box-tools pull-right"> <button data-widget="remove" class="btn btn-box-tool"><i class="fa fa-times"></i></button> </div> <!-- /.box-tools --> </div> <div class="box-body" title="{$subcontent.description}"> <audio src="__UPLOAD__/'+src+'" controls="controls">Your browser does not support the audio element. </audio> </div> <input type="hidden" name="voice" value="'+id+'"/> </div>'
            $('#tab_1-3 .right-bar',parent.document).html('');
            $('#tab_1-3 .right-bar',parent.document).html(box);
            $('#sub_type_id',parent.document).val(3);
            var index = parent.layer.getFrameIndex('layui-layer-iframe1');
            parent.layer.close(index)
        }
    </script>

    <link href="__PLUS__/jPlayer-2.9.1/skin/blue.monday/jplayer.blue.monday.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="__PLUS__/jPlayer-2.9.1/dist/jplayer/jquery.jplayer.min.js"></script>
    <volist name="list" id="vo" key="i">
        <script>
            $(function(){
                $("#jquery_jplayer_{$i}").jPlayer({
                    ready: function () {
                        $(this).jPlayer("setMedia", {
                            title: "{$vo.title}",
                            mp3: "__UPLOAD__/{$vo.src}",
                            wav: "__UPLOAD__/{$vo.src}",
                            wma: "__UPLOAD__/{$vo.src}",
                            amr: "__UPLOAD__/{$vo.src}"
                        });
                    },
                    swfPath: "__PLUS__/jPlayer-2.9.1/dist/jplayer",
                    supplied: "mp3,wav,wma,amr",
                    cssSelectorAncestor: "#jp_container_{$i}",
                    wmode: "window",
                    globalVolume: true,
                    useStateClassSkin: true,
                    autoBlur: false,
                    smoothPlayBar: true,
                    keyEnabled: true
                });
            })

        </script>
    </volist>
</block>