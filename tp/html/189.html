<!DOCTYPE HTML>
<html lang="zh-CN">
	<head>
		<meta charset="GB2312">
		<title>Cookie支持</title>
		<link rel="stylesheet" href="../images/css/book.css">
		<link rel="stylesheet" href="../images/prettify/prettify.css">
		<script type="text/javascript" src="../images/js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="../images/prettify/prettify.js"></script>
		<script type="text/javascript">
			$(function(){	
				$(window).resize(function(){
					$('.book-content').css('min-height', $(window).height() - 130);
				}).resize();
				
				var $code = $(".book-content pre");
				$code.each(function(){
					var $this = $(this), $code = $this.children("code"), lang = $code.attr("class");
					$this.addClass("prettyprint linenums");
					lang && $this.addClass("lang-" + lang);					
				});
				
				//调用高亮插件，高亮代码
				prettyPrint();
				
				//解决表格存在边距的问题
				$("table").attr({"cellspacing":"0", "cellpadding":"0"});
				
				//快捷键翻页
				$(document).keydown(function(event){
					if(event.keyCode == 37){ //上一页
						$(".book-title .prev span").click();
					} else if(event.keyCode == 39) {//下一页
						$(".book-title .next span").click();
					}
				});
				
			});
		</script>
	</head>
	<body>
		<div class="book-title">
			<h1>Cookie支持</h1>
            <div class="page"><a title="上一页" class="prev" href="188.html"><span>上一页</span></a><a title="下一页" class="next" href="190.html"><span>下一页</span></a></div>
            <div class="description"></div>
		</div>
		<div class="book-content"><p>系统内置了一个cookie函数用于支持和简化Cookie的相关操作，该函数可以完成Cookie的设置、获取、删除操作。</p>

<h2>Cookie设置</h2>

<pre><code>cookie('name','value');  //设置cookie
cookie('name','value',3600); // 指定cookie保存时间
</code></pre>

<p>还可以支持参数传入的方式完成复杂的cookie赋值，下面是对cookie的值设置3600秒有效期，并且加上cookie前缀think_</p>

<pre><code>cookie('name','value',array('expire'=&gt;3600,'prefix'=&gt;'think_'))
</code></pre>

<p>数组参数可以采用query形式参数</p>

<pre><code>cookie('name','value','expire=3600&amp;prefix=think_')
</code></pre>

<p>和上面的用法等效。</p>

<blockquote>
  <p>后面的参数支持<code>prefix,expire,path,domain和httponly（**3.2.2版本新增**）</code>五个索引参数，如果没有传入或者传入空值的话，会默认取<code>COOKIE_PREFIX</code>、<code>COOKIE_EXPIRE</code>、<code>COOKIE_PATH</code>、<code>COOKIE_DOMAIN</code>和<code>COOKIE_HTTPONLY</code>五个配置参数。如果只传入个别参数，那么也会和默认的配置参数合并。</p>
</blockquote>

<p>支持<strong>给cookie设置数组值</strong>（采用JSON编码格式保存），例如：</p>

<pre><code>cookie('name',array('value1','value2'));
</code></pre>

<h2>Cookie获取</h2>

<p>获取cookie很简单，无论是怎么设置的cookie，只需要使用：</p>

<pre><code>$value = cookie('name');
</code></pre>

<p>如果没有设置cookie前缀的话 相当于</p>

<pre><code>$value = $_COOKIE['name'];
</code></pre>

<p>如果设置了cookie前缀的话，相当于</p>

<pre><code>$value = $_COOKIE['前缀+name'];
</code></pre>

<p>如果要获取所有的cookie，可以使用：</p>

<pre><code>$value = cookie();
</code></pre>

<p>该用法相当于</p>

<pre><code>$value = $_COOKIE;
</code></pre>

<blockquote>
  <p>注意，该用法会返回所有的cookie而无论是否当前的前缀。</p>
</blockquote>

<h2>Cookie删除</h2>

<p>删除某个cookie的值，使用：</p>

<pre><code>cookie('name',null);
</code></pre>

<p>要删除所有的Cookie值，可以使用：</p>

<pre><code>cookie(null); // 清空当前设定前缀的所有cookie值
cookie(null,'think_'); //  清空指定前缀的所有cookie值
</code></pre>
</div>
		<div class="book-footer">
			<div class="page"><a title="上一页" class="prev" href="188.html"><span>上一页</span></a><a title="下一页" class="next" href="190.html"><span>下一页</span></a></div>
		</div>
	</body>
</html>
