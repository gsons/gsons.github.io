<!DOCTYPE HTML>
<html lang="zh-CN">
	<head>
		<meta charset="GB2312">
		<title>配置格式</title>
		<link rel="stylesheet" href="../images/css/book.css">
		<link rel="stylesheet" href="../images/prettify/prettify.css">
		<script type="text/javascript" src="../images/js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="../images/prettify/prettify.js"></script>
		<script type="text/javascript">
			$(function(){	
				$(window).resize(function(){
					$('.book-content').css('min-height', $(window).height() - 130);
				}).resize();
				
				var $code = $(".book-content pre");
				$code.each(function(){
					var $this = $(this), $code = $this.children("code"), lang = $code.attr("class");
					$this.addClass("prettyprint linenums");
					lang && $this.addClass("lang-" + lang);					
				});
				
				//调用高亮插件，高亮代码
				prettyPrint();
				
				//解决表格存在边距的问题
				$("table").attr({"cellspacing":"0", "cellpadding":"0"});
				
				//快捷键翻页
				$(document).keydown(function(event){
					if(event.keyCode == 37){ //上一页
						$(".book-title .prev span").click();
					} else if(event.keyCode == 39) {//下一页
						$(".book-title .next span").click();
					}
				});
				
			});
		</script>
	</head>
	<body>
		<div class="book-title">
			<h1>配置格式</h1>
            <div class="page"><a title="上一页" class="prev" href="10.html"><span>上一页</span></a><a title="下一页" class="next" href="12.html"><span>下一页</span></a></div>
            <div class="description"></div>
		</div>
		<div class="book-content"><h2>PHP数组定义</h2>

<p>ThinkPHP框架中所有配置文件的定义格式均采用返回<strong>PHP数组</strong>的方式，格式为：</p>

<pre><code>//项目配置文件
return array(
    'DEFAULT_MODULE'     =&gt; 'Index', //默认模块
    'URL_MODEL'          =&gt; '2', //URL模式
    'SESSION_AUTO_START' =&gt; true, //是否开启session
    //更多配置参数
    //...
);
</code></pre>

<p>配置参数不区分大小写（因为无论大小写定义都会转换成小写），所以下面的配置等效：</p>

<pre><code>//项目配置文件
return array(
    'default_module'     =&gt; 'Index', //默认模块
    'url_model'          =&gt; '2', //URL模式
    'session_auto_start' =&gt; true, //是否开启session
    //更多配置参数
    //...
);
</code></pre>

<p>但是我们建议保持大写定义配置参数的规范。</p>

<p>还可以在配置文件中可以使用二维数组来配置更多的信息，例如：</p>

<pre><code>//项目配置文件
return array(
    'DEFAULT_MODULE'     =&gt; 'Index', //默认模块
    'URL_MODEL'          =&gt; '2', //URL模式
    'SESSION_AUTO_START' =&gt; true, //是否开启session
    'USER_CONFIG'        =&gt; array(
        'USER_AUTH' =&gt; true,
        'USER_TYPE' =&gt; 2,
    ),
    //更多配置参数
    //...
);
</code></pre>

<blockquote>
  <p>需要注意的是，二级参数配置区分大小写，也就说读取确保和定义一致。</p>
</blockquote>

<h2>其他配置格式支持</h2>

<p>3.2.2版本开始，配置文件增加<code>yaml/json/xml/ini</code>以及自定义格式支持。</p>

<p>我们可以在<strong>应用入口文件</strong>中定义应用的配置文件的后缀，例如：</p>

<pre><code>define('CONF_EXT','.ini');
</code></pre>

<p>定义后，应用的配置文件（包括模块的配置文件）后缀都统一采用.ini。</p>

<blockquote>
  <p>该配置不会影响框架内部的配置文件加载。</p>
</blockquote>

<p><strong>ini格式</strong>配置示例：</p>

<pre><code>DEFAULT_MODULE=Index ;默认模块
URL_MODEL=2 ;URL模式
SESSION_AUTO_START=on ;是否开启session
</code></pre>

<p><strong>xml格式</strong>配置示例：</p>

<pre><code>&lt;config&gt;
&lt;default_module&gt;Index&lt;/default_module&gt;
&lt;url_model&gt;2&lt;/url_model&gt;
&lt;session_auto_start&gt;1&lt;/session_auto_start&gt;
&lt;/config&gt;
</code></pre>

<p><strong>yaml格式</strong>配置示例：</p>

<pre><code>default_module:Index #默认模块
url_model:2 #URL模式
session_auto_start:True #是否开启session
</code></pre>

<p><strong>json格式</strong>配置示例：</p>

<pre><code>{
"default_module":"Index",
"url_model":2,
"session_auto_start":True
}
</code></pre>

<p>除了<code>yaml/json/xml/ini</code>格式之外，我们还可以自定义配置格式，定义如下：</p>

<pre><code>define('CONF_EXT','.test'); // 配置自定义配置格式（后缀）
define('CONF_PARSE','parse_test'); // 对应的解析函数
</code></pre>

<blockquote>
  <p>CONF_PARSE定义的解析函数返回值是一个配置数组。</p>
</blockquote>
</div>
		<div class="book-footer">
			<div class="page"><a title="上一页" class="prev" href="10.html"><span>上一页</span></a><a title="下一页" class="next" href="12.html"><span>下一页</span></a></div>
		</div>
	</body>
</html>
