<!DOCTYPE HTML>
<html lang="zh-CN">
	<head>
		<meta charset="GB2312">
		<title>入口绑定</title>
		<link rel="stylesheet" href="../images/css/book.css">
		<link rel="stylesheet" href="../images/prettify/prettify.css">
		<script type="text/javascript" src="../images/js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="../images/prettify/prettify.js"></script>
		<script type="text/javascript">
			$(function(){	
				$(window).resize(function(){
					$('.book-content').css('min-height', $(window).height() - 130);
				}).resize();
				
				var $code = $(".book-content pre");
				$code.each(function(){
					var $this = $(this), $code = $this.children("code"), lang = $code.attr("class");
					$this.addClass("prettyprint linenums");
					lang && $this.addClass("lang-" + lang);					
				});
				
				//调用高亮插件，高亮代码
				prettyPrint();
				
				//解决表格存在边距的问题
				$("table").attr({"cellspacing":"0", "cellpadding":"0"});
				
				//快捷键翻页
				$(document).keydown(function(event){
					if(event.keyCode == 37){ //上一页
						$(".book-title .prev span").click();
					} else if(event.keyCode == 39) {//下一页
						$(".book-title .next span").click();
					}
				});
				
			});
		</script>
	</head>
	<body>
		<div class="book-title">
			<h1>入口绑定</h1>
            <div class="page"><a title="上一页" class="prev" href="184.html"><span>上一页</span></a><a title="下一页" class="next" href="186.html"><span>下一页</span></a></div>
            <div class="description"></div>
		</div>
		<div class="book-content"><p>入口绑定是指在应用的入口文件中绑定某个模块，甚至还可以绑定某个控制器和操作，用来简化URL地址的访问。</p>

<h2>绑定模块</h2>

<p>例如，我们定义了一个入口文件admin.php，希望可以直接访问Admin模块，那么我们就可以在admin.php中进行模块绑定，定义如下：</p>

<pre><code>// 绑定访问Admin模块
define('BIND_MODULE','Admin');
// 定义应用目录
define('APP_PATH','./Application/');
require './ThinkPHP/ThinkPHP.php';
</code></pre>

<blockquote>
  <p>在3.2.0版本中常量定义需要改成：</p>

<pre><code>$_GET['m'] = 'Admin';
</code></pre>
</blockquote>

<p>在入口文件中绑定模块后，访问的URL地址中就不需要传入模块名称了。<br />
假设我们要访问Admin模块的Index控制器的test操作方法，访问地址如下：
<code>http://serverName/admin.php/Index/test/var/name</code>
如果访问 
<code>http://serverName/admin.php/Admin/Index/test/var/name</code>
就会出现下面的错误提示：</p>

<p><img src="../images/img/5.png" alt="QQ图片20140207194948" /></p>

<h2>绑定控制器</h2>

<p>和绑定模块一样，我们还可以绑定控制器（一般是和模块绑定结合使用）。
例如：</p>

<pre><code>// 绑定访问Admin模块
define('BIND_MODULE','Admin');
// 绑定访问Index控制器
define('BIND_CONTROLLER','Index');
// 定义应用目录
define('APP_PATH','./Application/');
require './ThinkPHP/ThinkPHP.php';
</code></pre>

<p>我们前面的URL访问就可以换成：
<code>http://serverName/admin.php/test/var/name</code></p>

<blockquote>
  <p>在3.2.0版本中常量定义需要改成：</p>

<pre><code>$_GET['m'] = 'Admin';
$_GET['c'] = 'Index';
</code></pre>
</blockquote>

<h2>绑定操作</h2>

<p>原则上，我们还可以在入口文件中绑定操作（虽然这种情况实际使用中不多见）。</p>

<pre><code>// 绑定访问Admin模块
define('BIND_MODULE','Admin');
// 绑定访问Index控制器
define('BIND_CONTROLLER','Index');
// 绑定访问test操作
define('BIND_ACTION','test');
// 定义应用目录
define('APP_PATH','./Application/');
require './ThinkPHP/ThinkPHP.php';
</code></pre>

<p>我们前面的URL访问就可以换成：
<code>http://serverName/admin.php/var/name</code></p>

<blockquote>
  <p>3.2.0版本不支持操作绑定。</p>
</blockquote>
</div>
		<div class="book-footer">
			<div class="page"><a title="上一页" class="prev" href="184.html"><span>上一页</span></a><a title="下一页" class="next" href="186.html"><span>下一页</span></a></div>
		</div>
	</body>
</html>
